<!DOCTYPE html>
<html lang="ro">
<head>
<meta charset="UTF-8">
<title>Confirmare nuntă</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body { font-family: Arial, sans-serif; background:#111; color:#fff; padding:40px; }
form { max-width:400px; margin:auto; background:#222; padding:20px; border-radius:10px; }
input, select, button { width:100%; padding:10px; margin-bottom:10px; }
button { background:#000; color:#fff; font-weight:bold; cursor:pointer; }
</style>
</head>

<body>

<form id="rsvpForm"
  action="https://docs.google.com/forms/d/e/1FAIpQLSdMmJkKLExM8gpo9Cj29OJH3U36P8CRWoMNSQrpwSRCvCtVTA/formResponse"
  method="POST"
  target="hidden_iframe"
  onsubmit="return trimiteConfirmarea();">

  <input type="text" name="entry.1111111111" id="nume" placeholder="Nume și prenume" required>

  <select name="entry.2222222222" id="participare" required>
    <option value="">Participare</option>
    <option value="Particip">Particip</option>
    <option value="Nu pot participa">Nu pot participa</option>
  </select>

  <select name="entry.3333333333" id="persoane" required>
    <option value="">Număr persoane</option>
    <option value="1">1</option>
    <option value="2">2</option>
    <option value="3">3</option>
  </select>

  <select name="entry.4444444444" id="meniu_normal">
    <option value="0">Meniu normal</option>
    <option value="0">0</option>
    <option value="1">1</option>
    <option value="2">2</option>
  </select>

  <select name="entry.5555555555" id="meniu_copii">
    <option value="0">Meniu copii</option>
    <option value="0">0</option>
    <option value="1">1</option>
    <option value="2">2</option>
  </select>

  <select name="entry.6666666666" id="meniu_vegan">
    <option value="0">Meniu vegan</option>
    <option value="0">0</option>
    <option value="1">1</option>
    <option value="2">2</option>
  </select>

  <button type="submit">Trimite confirmarea</button>
</form>

<iframe name="hidden_iframe" style="display:none;"></iframe>

<script>
function trimiteConfirmarea() {

  if (localStorage.getItem("trimis") === "da") {
    return false;
  }

  const participare = document.getElementById("participare").value;
  const persoane = Number(document.getElementById("persoane").value || 0);
  const normal = Number(document.getElementById("meniu_normal").value || 0);
  const copii = Number(document.getElementById("meniu_copii").value || 0);
  const vegan = Number(document.getElementById("meniu_vegan").value || 0);
  const total = normal + copii + vegan;

  if (participare === "Nu pot participa" && total > 0) {
    alert("Dacă nu participați, nu selectați meniuri.");
    return false;
  }

  if (participare === "Particip" && total !== persoane) {
    alert("Total meniuri ≠ număr persoane.");
    return false;
  }

  localStorage.setItem("trimis", "da");

  document.getElementById("rsvpForm").innerHTML = `
    <h3>Vă mulțumim ❤️</h3>
    <p>Confirmarea a fost înregistrată.</p>
  `;

  return true;
}
</script>

</body>
</html>
